<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs"
	template="/layout/template.xhtml">




	<f:metadata>
		<f:viewAction action="#{workflowController.onLoad()}" />
	</f:metadata>

	<ui:define name="content">
		<f:view>
			<h:form id="workitem_form_id">

				<div class="row">
					<div class="col-7" style="border-right: 1px solid #ccc;">


						<h2>#{workflowController.workitem.item['$WorkflowGroup']} â–¹
							#{workflowController.workitem.item['$WorkflowStatus']}</h2>

						<div id="workitem_form_body">
							<!-- Error  -->
							<ui:include src="error.xhtml" />


							<dl>
								<dt>Team:</dt>
								<dd>
									<h:selectOneMenu id="team_id" style="width:100%"
										value="#{workflowController.workitem.item['team']}"
										required="false">
										<f:selectItem required="true"
											itemLabel="#{global.please_select}" itemValue="" />
										<f:selectItems value="#{teamController.teamSelection}" />
									</h:selectOneMenu>
								</dd>

							</dl>


							<ui:fragment rendered="#{! empty customFormController.sections}">
								<!-- Display the custom form  -->
								<ui:include src="/pages/workflow/custom.xhtml">
									<ui:param name="workitem"
										value="#{workflowController.workitem}" />
								</ui:include>
							</ui:fragment>
							<ui:fragment rendered="#{empty customFormController.sections}">
								<p class="lead">You process definition does not define any
									form elements. You can add a form layout by your model</p>
								<p>Example:</p>
								<pre class="code">
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;imixs-form&gt;
  &lt;imixs-form-section&gt;
    &lt;item name=&quot;_descripton&quot; type=&quot;textarea&quot;
        label=&quot;Short Description&quot; /&gt;
  &lt;/imixs-form-section&gt;
  &lt;imixs-form-section&gt;
    &lt;item name=&quot;_details&quot; type=&quot;html&quot; label=&quot;Description&quot; /&gt;
  &lt;/imixs-form-section&gt;
&lt;/imixs-form&gt;
							 </pre>
							</ui:fragment>


						</div>
						<!-- form body end -->


						
					</div>


					<div class="col-5">
						<!-- **** Workflow Actions & History  ***** -->
						<ui:include src="/pages/workflow/sub_workflowtoolbar.xhtml" />
					</div>
				</div>
			</h:form>
			
			
			<!-- LibreOffice Editor -->
			<div id="wopi_controlls">
				<button onclick="imixsWopi.save(); return false;">Update</button><button onclick="closeWopiViewer(); return false;">Close</button>
				<hr />
			</div>
			<div id="wopi_canvas" style="display: none;">


			</div>
			<script>
			
			// open the wopi viewer
			function openWopiViewer(url) {
				// hide the workflow form
				var imixsform = $('#workitem_form_id');
				imixsform.hide();
				
				// open viewer...		
				imixsWopi.openViewer('wopi_canvas', url);
				
				// define save callback for close
				imixsWopi.saveCallback=closeWopiViewer;
				
			}
			
			// close the wopi viewer
			function closeWopiViewer() {
				console.log("close ");
				imixsWopi.closeViewer();
				// show workflow form
				var imixsform = $('#workitem_form_id');
				imixsform.show();
			}
			</script>
		</f:view>
	</ui:define>

</ui:composition>
